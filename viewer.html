<!DOCTYPE html>
<html>
<head>
	<title>Viewer</title>
	<meta charset="utf-8">
	<link rel="stylesheet" type="text/css" href="lightStyle.css">
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/svg.js/2.6.4/svg.js" ></script>
	<script type="text/javascript" src="svg.path.js" ></script>
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script type="text/javascript" src="aegiskan.js" ></script>
</head>
<body>

<script type="text/javascript"> 
    jQuery(document).ready(function () {
    	function urldecode(str) {
    		return decodeURIComponent((str + '').replace(/\+/g, '%20'));
    	}

    	function getUrlVars() {
    		var vars = [], hash;
    		var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
    		for (var i = 0; i < hashes.length; i++) {
    			hash = hashes[i].split('=');
    			vars.push(hash[0]);
    			vars[hash[0]] = urldecode(hash[1]);
    		}
    		return vars;
    	}

    	var kanji = getUrlVars()["kanji"];
    	var color = new SVG.Color('#000000');
    	if (kanji == null) {
    		kanji = jQuery('#kanji').val();
    	} else {
    		jQuery('#kanji').val(kanji);
    	}
    	AegisKanView.initialize(
    		"aegisKanView",						// divName
    		jQuery('#strokeWidth').val(),		// strokeWidth
    		12,									// fontSize
    		jQuery('#zoomFactor').val(),		// zoomFactor
    		kanji,								// kanji
    		color,								// color
    		'false',							// animate
    		'1000'								// animateTime
    	);
    	jQuery('#viewerParams').submit(function() {
    		AegisKanView.setStrokeWidth(jQuery('#strokeWidth').val());
    		AegisKanView.setZoom(jQuery('#zoomFactor').val());
    		if (jQuery('#animate').prop('checked')) {
    			AegisKanView.setAnimate('true');
			} else {
				AegisKanView.setAnimate('false');
			}
			AegisKanView.setAnimateTime(jQuery('#animateTime').val());
    		AegisKanView.setKanji(jQuery('#kanji').val());
    		AegisKanView.refreshKanji();
    		return false;
    	});
    });
</script>

	<h1 style="text-align: center;"><b>AegisKan</b></h1>
	
	<!--  Paraemeter settings block -->
	<form id="viewerParams" action="#" class="form-horizontal">
		<fieldset>
			<div class="control-group">
				<label class="control-label" for="kanji">Kanji</label>
				
				<div class="controls docs-input-sizes">
					<input class="span3" type="text" value="" id="kanji" placeholder="e.g. å‹">
				</div>
			</div>
			<br>
			<div class="control-group">
				<label class="control-label" for="strokeWidth">Stroke Width</label>
				<div class="controls docs-input-sizes">
					<input class="span3" type="text" value="3" id="strokeWidth" placeholder="3">
				</div>
			</div>
			<br>
			<div class="control-group">
				<label class="control-label" for="zoomFactor">Zoom Factor</label>
				<div class="controls docs-input-sizes">
					<input class="span3" type="text" value="3" id="zoomFactor" placeholder="3">
				</div>
			</div>
			<br>
			<div class="control-group">
				<label class="control-label" for="animateTime">Animation Time per Stroke (ms)</label>
				<div class="controls docs-input-sizes">
					<input class="span3" type="text" value="1000" id="animateTime" placeholder="1000">
				</div>
			</div>
			<br>
			<div class="control-group">
				<label class="control-label" id="optionsCheckboxes">Options</label>
				<div class="controls">
					<label class="checkbox">
						<input type="checkbox" id="animate">Animate Stroke Drawing
					</label>
					<br>
					<label class="checkbox">
						<input type="checkbox" id="allStrokes">Draw all strokes simultaeneously
					</label>
				</div>
			</div>
			<div class="form-actions">
				<input type="submit" class="btn btn-primary" value="Redraw">&nbsp;
				<button type="reset" class="btn btn-info">Reset</button>
			</div>
		</fieldset>
	</form>
	<div id="aegisKanView">	</div>
</body>
</html>
